<div class="container">

  <% if (@issue_documents and @issue_documents.count == 0) or (@project_documents and @project_documents.count == 0)  %>
    <h3>No documents to show</h3>

  <% else %>
  <h1>Documents List</h1>

  <table class="table table-hover" id="DocumentsTable">
  <thead>
    <tr>
      <th scope="col">Document </th>
      <th scope="col">Document Index</th>
      <th scope="col">Name</th>
      <th scope="col">Type</th>
      <th scope="col">Download</th>
    
    </tr>
  </thead>
  <tbody>

      <% if @issue_documents %>

            <% @issue_documents.all.each_with_index do |document, index_no| %>
                  <tr>
                    <% if document.document.url.include? 'jpeg' or document.document.url.include? 'png' or document.document.url.include? 'jpg'  %>
                       <td><%= link_to(image_tag(document.document.url(:medium)), document.document.url, target: '_blank') if document.document.exists? %></td>
                    
                    <% else %>
                      <td>Document</td>
                    <% end %>
                    <td><%= index_no + 1 %></td>
                    <td><%=  document.document_file_name %></td>
                    <td><%=  document.document_content_type %></td>
                    <td><%= link_to "Open", document.document.url(:original, false) %></td>
                  
                    <td><%= link_to "Delete", issue_document_path(@issue_id ,document), method: :delete, data:{confirm: 'Are you sure?'}, :class => 'btn btn-primary' %></td>
                    
                  </tr>
           <% end %>


      <% else %>
              <% @project_documents.all.each_with_index do |document, index_no| %>
                  <tr>
                    <% if document.document.url.include? 'jpeg' or document.document.url.include? 'png' or document.document.url.include? 'jpg'  %>
                       <td><%= link_to(image_tag(document.document.url(:medium)), document.document.url, target: '_blank') if document.document.exists? %></td>
                    
                    <% else %>
                      <td>Document</td>
                    <% end %>
                    <td><%= index_no + 1 %></td>
                    <td><%=  document.document_file_name %></td>
                    <td><%=  document.document_content_type %></td>
                    <td><%= link_to "Open", document.document.url(:original, false) %></td> 
                    <td><%= link_to "Delete", project_document_path(@project_id ,document), method: :delete, data:{confirm: 'Are you sure?'}, :class => 'btn btn-primary' %></td>
                  </tr>
              <% end %>

      <% end %>

  </tbody>
  <% end %>
  
</div>

