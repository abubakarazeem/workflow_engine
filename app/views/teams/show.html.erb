<div class="container">
  <div class="wrapper">
    <h2 class="float-left"><%= @team.name %></h2>
    <% if can? :manage, Team %>
    <%= link_to "Remove Team", team_path(@team.id), method: :delete, data:{ confirm: 'Are you sure?' }, class: 'btn btn-secondary float-right' %>
    <button type="button" class="btn btn-secondary float-right mr-2" data-toggle="modal" data-target="#edit_team_modal">Edit Team</button>
    <%= render partial: 'edit_team_modal'%>
    <button type="button" class="btn btn-secondary float-right mr-2" data-toggle="modal" data-target="#add_member_modal">Add Member</button>
    <%= render partial: 'add_member_modal' %>
  <% end %>  
  </div>
  <br>

  <div>
    <h3>Members </h3>    
    <table class="table table-hover" id="team_members_table">
      <thead>
        <th scope="row">Name</th>
        <th scope="row">Admin</th>
        <th scope="row">Action</th>
      </thead>
      <tbody>

        <% @team_memberships.each do |membership| %>
          <% if membership.team_id == @team.id && membership.is_approved %>
            <tr id="membership_<%= membership.id %>"> <span class="glyphicon glyphicon-user"></span> 
              <td><%= membership.user.name%></td>
              <% if membership.is_team_admin %>
                <td>Yes</td>
              <% else %>
                <td>No</td>
              <% end %>
              <td><%= link_to 'Remove', remove_member_team_path(@team.id, membership_id: membership.id), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-danger btn-sm', remote: true %></td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
  <br><br>
 
</div>