issueStateFlash.html('<%= j render partial: "layouts/notice" %>');
<% unless @issue_state.errors.any? %>
  tr = $("#issue_state_<%= @issue_state.id %>");
  issueStateUpdateClassAndId(tr);
  tr.find('td:eq(0)').html( updatedIssueStateName() );
  tr.find('td:eq(1)').html( updatedIssueStateIcon() );
  tr.find('td:eq(2)').html( updatedIssueStateIssueId() );
  tr.find('td:eq(3)').html( updatedIssueStateButtons() );
  issueStatesTable.row(tr).invalidate().draw();
<% else %>
  issueStatesErrors.html('<%= j render partial: "layouts/errors", locals: {model: @issue_state} %>');
<% end %>


function updatedIssueStateName() {
  return "<%= @issue_state.name %>"
}

function updatedIssueStateIcon() {
  <% if @issue_state.issue_id.nil? %>
  return "<i class='fas fa-check-circle'></i>"
  <% else %>
  return "<i class='fas fa-times-circle'></i>"
  <% end %>
}

function updatedIssueStateIssueId() {
  return "<%= @issue_state.issue_id.nil? ? 'NA' : @issue_state.issue_id.to_s %>"
}

function updatedIssueStateButtons() {
  return "<%= j link_to("Delete", issue_state_path(@issue_state), method: "delete", remote: true, data: { confirm: "Are you sure to delete this issue state?"}, class: "btn btn-danger btn-sm text-white mr-2 mb-1 mb-md-0 fixed-width") %>  " +
         "<%= j link_to("Edit", edit_issue_state_path(@issue_state), remote: true, class: "btn btn-primary btn-sm text-white mr-2 mb-1 mb-md-0 fixed-width") %>  " +
         "<%= j link_to("Show", issue_state_path(@issue_state), remote: true, class: "btn btn-success btn-sm text-white fixed-width") %>"
}

function issueStateUpdateClassAndId(row) {
  row.attr('id', "issue_state_<%= @issue_state.id %>");
  row.attr('class', "<%= @issue_state.issue_id.nil? ? 'global' : 'issue-'+@issue_state.issue_id.to_s %>");
}
